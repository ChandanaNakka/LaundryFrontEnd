import"./style-CWPg30Uh.js";import"./EntryFile-BS4wfFeh.js";import"./EntryFile-B8x209MB.js";import"./EntryFile-B5fBQVjD.js";/* empty css               */import{S as s}from"./EntryFile-0QZuJqKI.js";const d="POST",u="",n={method:d,body:u};let m=()=>{let t=document.getElementById("FormId");var e=new FormData(t);return e.append("image",h()),n.body=e,n};const h=()=>{var t=document.createElement("canvas"),e=document.getElementById("photo");t.height=e.naturalHeight,t.width=e.naturalWidth;var a=t.getContext("2d");a.drawImage(e,0,0,t.width,t.height);var r=t.toDataURL();return r},g="bin",f={PostUrl:g};let F=async()=>{let t=f.PostUrl,e=jVarGlobalTableName,a=m(),r=`/${t}/${e}/UploadImageAsData`;return await await fetch(r,a)},L=()=>{let e=document.getElementById("FormId").querySelectorAll("[required]"),a=!0;return e.forEach(r=>{if(r.value.trim().length===0){r.classList.add("is-invalid"),a=!1;return}}),a};const S="Show.html",v="CreateCamera.html",l={RedirectToUrl:S,PresentUrl:v};let b=()=>{$()===!1&&j()};const $=()=>window.location.pathname.endsWith(`/${l.PresentUrl}`)?(window.location.href=`${l.RedirectToUrl}`,!0):!1,j=()=>{let t=`${jVarGlobalTableName}${l.RedirectToUrl}`;window.location.href=t};let w=async()=>{L()&&(await F()).status===200&&b()},I=()=>{let t=document.getElementById("SaveButtonId");t!==null&&t.addEventListener("click",w)},V=()=>{const t={audio:!1,video:{width:700,height:500}};navigator.mediaDevices.getUserMedia(t).then(e=>{const a=document.querySelector("video");a.srcObject=e,a.play()}).catch(e=>{console.error(`${e.name}: ${e.message}`)})},p=()=>{let t=document.getElementById("CameraId");t!==null&&t.addEventListener("click",V)},y=t=>{console.log("this : ",t),U(),t.preventDefault()};function U(){const t=document.getElementById("canvas"),e=t.getContext("2d"),a=320,r=300,o=document.getElementById("photo");{t.width=a,t.height=r,e.drawImage(video,0,0,a,r);const i=t.toDataURL("image/png");o.setAttribute("src",i)}}let E=()=>{let t=document.getElementById("startbutton");t!==null&&t.addEventListener("click",y)},T=t=>{const e=t.currentTarget,a=320;let r=0,o=!1;o||(r=e.videoHeight/(e.videoWidth/a),isNaN(r)&&(r=a/(4/3)),e.setAttribute("width",a),e.setAttribute("height",r),canvas.setAttribute("width",a),canvas.setAttribute("height",r),o=!0)},B=()=>{let t=document.getElementById("video");t!==null&&t.addEventListener("canplay",T,!1)},R=()=>{I(),p(),E(),B()};const c=()=>{R()},A=()=>{s({inSuccessFunc:c})&&c()};A();
