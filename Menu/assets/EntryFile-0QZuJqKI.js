const n=()=>l("KSToken")!=="",l=e=>document.cookie.split("; ").reduce((t,a)=>a.startsWith(e+"=")?a.split("=")[1]:t,""),s=()=>{const e=document.getElementById("LoginModalId");e.addEventListener("shown.bs.modal",function(){document.getElementById("UsernameId").focus()}),new bootstrap.Modal(e,{focus:!0}).show()};let r=()=>!(c()===!1||d()===!1);const c=()=>{let e=document.getElementById("UsernameId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},d=()=>{let e=document.getElementById("PasswordId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},i="POST",u={Accept:"application/json","Content-Type":"application/json"},m="",o={method:i,headers:u,body:m};let L=()=>{let e={},t=document.getElementById("UsernameId").value,a=document.getElementById("PasswordId").value;return e.UserName=t,e.Password=a,e},f=()=>(o.body=JSON.stringify(L()),o),y=async()=>{let e=f();return await await fetch("/Login/bin/CreateToken/UsingJwt",e)},I=async({Status:e,inSuccessFunc:t})=>{let a=e;a.status===200&&(g(),t()),a.status===401&&j()},g=()=>{const e=document.getElementById("LoginModalId"),t=bootstrap.Modal.getInstance(e);t&&t.hide()},j=()=>{let e=document.getElementById("UsernameId"),t=document.getElementById("PasswordId");e.classList.add("is-invalid"),t.classList.add("is-invalid")},F=async({inSuccessFunc:e})=>{if(r()){let t=await y();I({Status:t,inSuccessFunc:e})}},v=({inSuccessFunc:e})=>{document.getElementById("LoginButtonId").addEventListener("click",async()=>{await F({inSuccessFunc:e})})},S=({inSuccessFunc:e})=>{v({inSuccessFunc:e})};const V=({inSuccessFunc:e})=>{if(n()===!0)return!0;s(),S({inSuccessFunc:e})};export{V as S};
