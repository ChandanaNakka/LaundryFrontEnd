import"./style-CWPg30Uh.js";import"./EntryFile-BS4wfFeh.js";const s="bin",i={GetUrl:s},u=async()=>{let t=d({inGetKey:"inRowPk"});return t===null?(alert("need inRowPk in URL "),await!1):await await(await fetch(`/${i.GetUrl}/${jVarGlobalTableName}/${t}`)).json()};let d=({inGetKey:t})=>{const a=window.location.search;return new URLSearchParams(a).get(t)};const m=async()=>await u(),b=async()=>{let t=await m();return t===!1?await!1:(h({inDataAsObject:t}),j(),t)},h=({inDataAsObject:t})=>{document.getElementById("FormId").querySelectorAll("input").forEach(r=>{r.name in t&&(r.value=t[r.name])})},j=()=>{document.getElementById("BsSubTableRefreshId").click()},L={"data-toolbar":"#ToolBarFixed","data-search":"true","data-searchable":"true","data-show-footer":"true","data-id-field":"pk"},F={tableAttributes:L},f=()=>{var t=$("#table");t.attr(F.tableAttributes)},S="DELETE",V={Accept:"application/json","Content-Type":"application/json"},w="",y={method:S,headers:V,body:w};let p=()=>y;const T="bin",R={PostUrl:T};let I=async({InMainRowPk:t,inRowPk:a})=>{let e=R.PostUrl,r=jVarGlobalSubTableName,l=p(),o=`/${e}/${r}/${a}`;return await await fetch(o,l)},g=()=>{window.location.href=""},n=async({InMainRowPk:t,inRowPk:a})=>{(await I({InMainRowPk:t,inRowPk:a})).status===200&&g()};const P=async(t,a,e)=>{e==="KS-Delete"&&(await Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"error",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"grey",returnInputValueOnDismiss:!0,confirmButtonText:"Yes, delete it!",reverseButtons:!0,focusCancel:!0,cancelButtonText:"Cancel"})).isConfirmed&&("id"in t&&await n({inRowPk:t.id}),"pk"in t&&(console.log("row--",t),await n({inRowPk:t.pk,InMainRowPk:t.RefPK})))},U=async()=>{let t=jVarGlobalSubTableTagId;var a=$(`#${t}`);a.bootstrapTable({data:[],onClickRow:P})},B=()=>{f(),U().then()},k="POST",D={Accept:"application/json","Content-Type":"application/json"},v="",c={method:k,headers:D,body:v};let E=()=>{let t=document.getElementById("FormId");return c.body=JSON.stringify(C(t)),c};function C(t){var a=new FormData(t),e={};for(var[r,l]of a)e[r]?(Array.isArray(e[r])||(e[r]=[e[r]]),e[r].push(l)):e[r]=l;return e}const G="bin",A={PostUrl:G};let N=async()=>{let t=A.PostUrl,a=jVarGlobalTableName,e=E(),r=`/${t}/${a}`;return await await(await fetch(r,e)).json()},q=()=>{let a=document.getElementById("FormId").querySelectorAll("[required]"),e=!0;return a.forEach(r=>{if(r.value.trim().length===0){r.classList.add("is-invalid"),e=!1;return}}),e};const J="ShowSimple.html",K={RedirectToUrl:J};let H=()=>{window.location.href=`${jVarGlobalTableName}${K.RedirectToUrl}`},x=async()=>{if(q()){let a=await N();a!==null&&a&&H()}},O=()=>{let t=document.getElementById("SaveButtonId");t!==null&&t.addEventListener("click",x)};const z="bin",M={PostUrl:z};let Q=async()=>{let t=M.PostUrl,a=jVarGlobalSubTableName,e=Y({inGetKey:"inRowPk"}),r=`/${t}/${a}/FilterData/RefPK/${e}`;return await await fetch(r)},Y=({inGetKey:t})=>{const a=window.location.search;return new URLSearchParams(a).get(t)},W=()=>{let a=document.getElementById("FormId").querySelectorAll("[required]"),e=!0;return a.forEach(r=>{if(r.value.trim().length===0){r.classList.add("is-invalid"),e=!1;return}}),e},X=({InData:t})=>{let a=jVarGlobalSubTableTagId;console.log("InData:",t);var e=$(`#${a}`);e.bootstrapTable("load",t)},Z=async()=>{if(W()){let a=await Q();if(a.status===200){let e=await a.json();e&&X({InData:e})}}},_=()=>{let t=document.getElementById("BsSubTableRefreshId");t!==null&&t.addEventListener("click",Z)},tt=()=>{O(),_()};const et=async()=>{b().then(),B(),tt(),at()},at=()=>{document.getElementById("HeaderToDataListId").click()},rt=()=>{et()};rt();
